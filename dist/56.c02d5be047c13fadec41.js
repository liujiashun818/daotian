(function(){"use strict";var e=this,t=this,a=function(e,a,n){function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,a){if(!(e instanceof a))throw new t.TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,a){if(!e)throw new t.ReferenceError("this hasn't been initialised - super() hasn't been called");return!a||"object"!=typeof a&&"function"!=typeof a?e:a}function _inherits(e,a){if("function"!=typeof a&&null!==a)throw new t.TypeError("Super expression must either be null or a function, not "+typeof a);e.prototype=t.Object.create(a&&a.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),a&&(t.Object.setPrototypeOf?t.Object.setPrototypeOf(e,a):e.__proto__=a)}t.Object.defineProperty(a,"__esModule",{value:!0});var l=(n(49),n(48)),r=_interopRequireDefault(l),i=(n(51),n(50)),u=_interopRequireDefault(i),o=(n(158),n(131)),s=_interopRequireDefault(o),c=(n(37),n(59)),d=_interopRequireDefault(c),p=function(){function defineProperties(e,a){for(var n=0;n<a.length;n++){var l=a[n];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),t.Object.defineProperty(e,l.key,l)}}return function(e,t,a){return t&&defineProperties(e.prototype,t),a&&defineProperties(e,a),e}}(),f=n(0),m=_interopRequireDefault(f),h=n(22),_=_interopRequireDefault(h),y=n(315),b=_interopRequireDefault(y),v=n(1806),g=_interopRequireDefault(v),E=n(2174),k=_interopRequireDefault(E),w=d.default.Search,P=s.default.Option,C=function(e){function List(e){_classCallCheck(this,List);var a=_possibleConstructorReturn(this,(List.__proto__||t.Object.getPrototypeOf(List)).call(this,e));return a.state={page:1,key:"",types:[],maintainType:""},["handleSearchChange","handleTypeSelect","getMaintainItemTypes"].map(function(e){return a[e]=a[e].bind(a)}),a}return _inherits(List,e),p(List,[{key:"componentDidMount",value:function(){this.getMaintainItemTypes()}},{key:"handleSearchChange",value:function(e){this.setState({key:e.target.value,page:1})}},{key:"handleTypeSelect",value:function(e){this.setState({maintainType:e,page:1})}},{key:"getMaintainItemTypes",value:function(){var e=this;_.default.ajax({url:_.default.aftersales.getMaintainItemTypes()},function(t){e.setState({types:t.res.type_list})})}},{key:"render",value:function(){var e=this.state.types;return m.default.createElement("div",null,m.default.createElement(r.default,{className:"head-action-bar-line mb20"},m.default.createElement(u.default,{span:16},m.default.createElement("label",{className:"label"},"搜索项目"),m.default.createElement(w,{onChange:this.handleSearchChange,style:{width:220},size:"large",placeholder:"请输入名称搜索"}),m.default.createElement("label",{className:"label ml20"},"产值类型"),m.default.createElement(s.default,{placeholder:"请选择产值类型",onSelect:this.handleTypeSelect,style:{width:"200px"},size:"large",defaultValue:"-1"},m.default.createElement(P,{key:"-1"},"全部"),e.map(function(e){return m.default.createElement(P,{key:e._id},e.name)}))),m.default.createElement(u.default,{span:8},m.default.createElement("span",{className:"pull-right"},m.default.createElement(g.default,{onSuccess:this.handleSuccess})))),m.default.createElement("span",{className:"maintain-item-index"},m.default.createElement(k.default,{source:_.default.maintainItem.list(this.state),page:this.state.page,reload:this.state.reload,updateState:this.updateState,onSuccess:this.handleSuccess})))}}]),List}(b.default);a.default=C},n=function(e,a,n){t.Object.defineProperty(a,"__esModule",{value:!0});var l={aftersales:{project:{destroy:"aftersales/project/destroy"},consumptiveMaterial:{examine:"aftersales/consumptive-material/examine"}},warehouse:{purchase:{import:"warehouse/purchase/import",pay:"warehouse/purchase/pay"},purchaseReject:{export:"warehouse/purchase-reject/export",pay:"warehouse/purchase-reject/pay"},stocktaking:{auth:"warehouse/stocktaking/auth",authorize:"warehouse/stocktaking/authorize",import:"warehouse/stocktaking/import"},supplier:{pay:"warehouse/supplier/pay"}},customer:{information:"customer/customer-information",auto:"customer/auto-information",insurance:"customer/insurance-information",deal:"customer/deal-information",maintenance:"customer/maintenance-information",intention:"customer/intention-information",reminder:"customer/reminder"},deal:{calculatedReturn:"presales/deal-auto/calculation-income"},maintainItem:{commission:"maintain-item/commission"},marketing:{commission:"\tmarketing/membercard/commission"}};a.default=l},l=function(e,a,n){function _classCallCheck(e,a){if(!(e instanceof a))throw new t.TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,a){if(!e)throw new t.ReferenceError("this hasn't been initialised - super() hasn't been called");return!a||"object"!=typeof a&&"function"!=typeof a?e:a}function _inherits(e,a){if("function"!=typeof a&&null!==a)throw new t.TypeError("Super expression must either be null or a function, not "+typeof a);e.prototype=t.Object.create(a&&a.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),a&&(t.Object.setPrototypeOf?t.Object.setPrototypeOf(e,a):e.__proto__=a)}t.Object.defineProperty(a,"__esModule",{value:!0});var l=function(){function defineProperties(e,a){for(var n=0;n<a.length;n++){var l=a[n];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),t.Object.defineProperty(e,l.key,l)}}return function(e,t,a){return t&&defineProperties(e.prototype,t),a&&defineProperties(e,a),e}}(),r=n(634),i=function(e){return e&&e.__esModule?e:{default:e}}(r),u=function(e){function BaseModalWithUpload(e){_classCallCheck(this,BaseModalWithUpload);var a=_possibleConstructorReturn(this,(BaseModalWithUpload.__proto__||t.Object.getPrototypeOf(BaseModalWithUpload)).call(this,e));return["showModal","hideModal"].map(function(e){return a[e]=a[e].bind(a)}),a}return _inherits(BaseModalWithUpload,e),l(BaseModalWithUpload,[{key:"showModal",value:function(){this.setState({visible:!0})}},{key:"hideModal",value:function(){this.setState({visible:!1})}}]),BaseModalWithUpload}(i.default);a.default=u},r=function(e,a,n){function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _defineProperty(e,a,n){return a in e?t.Object.defineProperty(e,a,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[a]=n,e}function _asyncToGenerator(e){return function(){var a=e.apply(this,arguments);return new t.Promise(function(e,n){function step(l,r){try{var i=a[l](r),u=i.value}catch(e){return void n(e)}if(!i.done)return t.Promise.resolve(u).then(function(e){step("next",e)},function(e){step("throw",e)});e(u)}return step("next")})}}function _classCallCheck(e,a){if(!(e instanceof a))throw new t.TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,a){if(!e)throw new t.ReferenceError("this hasn't been initialised - super() hasn't been called");return!a||"object"!=typeof a&&"function"!=typeof a?e:a}function _inherits(e,a){if("function"!=typeof a&&null!==a)throw new t.TypeError("Super expression must either be null or a function, not "+typeof a);e.prototype=t.Object.create(a&&a.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),a&&(t.Object.setPrototypeOf?t.Object.setPrototypeOf(e,a):e.__proto__=a)}t.Object.defineProperty(a,"__esModule",{value:!0});var l=(n(312),n(311)),r=_interopRequireDefault(l),i=(n(202),n(201)),u=_interopRequireDefault(i),o=(n(47),n(41)),s=_interopRequireDefault(o),c=(n(49),n(48)),d=_interopRequireDefault(c),p=(n(157),n(35)),f=_interopRequireDefault(p),m=(n(51),n(50)),h=_interopRequireDefault(m),_=(n(37),n(59)),y=_interopRequireDefault(_),b=(n(66),n(65)),v=_interopRequireDefault(b),g=(n(630),n(318)),E=_interopRequireDefault(g),k=(n(158),n(131)),w=_interopRequireDefault(k),P=(n(68),n(67)),C=_interopRequireDefault(P),S=(n(322),n(321)),R=_interopRequireDefault(S),I=t.Object.assign||function(e){for(var a=1;a<arguments.length;a++){var n=arguments[a];for(var l in n)t.Object.prototype.hasOwnProperty.call(n,l)&&(e[l]=n[l])}return e},O=function(){function defineProperties(e,a){for(var n=0;n<a.length;n++){var l=a[n];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),t.Object.defineProperty(e,l.key,l)}}return function(e,t,a){return t&&defineProperties(e.prototype,t),a&&defineProperties(e,a),e}}(),T=n(0),x=_interopRequireDefault(T),q=n(9),D=_interopRequireDefault(q),j=n(114),M=_interopRequireDefault(j),V=n(1693),N=_interopRequireDefault(V),L=n(116),U=_interopRequireDefault(L),F=n(1615),W=_interopRequireDefault(F),z=n(22),B=_interopRequireDefault(z),J=n(632),K=_interopRequireDefault(J),A=R.default.TabPane,G=C.default.Item,Q=w.default.Option,H=E.default.Group,X=0,Y=function(e){function Edit(e){_classCallCheck(this,Edit);var a=_possibleConstructorReturn(this,(Edit.__proto__||t.Object.getPrototypeOf(Edit)).call(this,e));return a.state={visible:!1,itemLevelIndex:e.item&&e.item.levels?t.JSON.parse(e.item.levels).length:0,item:e.item||{},types:[],selectedPartTypes:e.item&&e.item.part_types?e.item.part_types.trim().split(","):[],partTypes:e.item?e.item.part_type_list:[],quoteType:e.item?e.item.quote_type:0,intro_keys:[0],icon_pic_key:"",icon_pic_files:[],icon_pic_progress:{},banner_pic_key:"",banner_pic_files:[],banner_pic_progress:{},introduce_pics_0_key:"",introduce_pics_0_files:[],introduce_pics_0_progress:{},isAppShow:!!e.item&&e.item.is_show_on_app,hasPermission:!1},["editItem","handleChange","handleSelect","addItemLevel","handleSubmit","handleQuoteTypeChange","handleSellChange","handleWorkChange"].map(function(e){return a[e]=a[e].bind(a)}),a}return _inherits(Edit,e),O(Edit,[{key:"componentDidMount",value:function(){this.checkPermission(W.default.maintainItem.commission)}},{key:"componentWillReceiveProps",value:function(e){var t=!1!==e.form.getFieldValue("is_show_on_app");this.setState({isAppShow:t})}},{key:"checkPermission",value:function(){function checkPermission(t){return e.apply(this,arguments)}var e=_asyncToGenerator(t.regeneratorRuntime.mark(function _callee(e){var a;return t.regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,B.default.checkPermission(e);case 2:a=t.sent,this.setState({hasPermission:a});case 4:case"end":return t.stop()}},_callee,this)}));return checkPermission}()},{key:"editItem",value:function(){this.getMaintainItemTypes();var e=this.props.item;e&&(this.setState({icon_pic_key:e.icon_pic,banner_pic_key:e.banner_pic}),this.props.form.setFieldsValue({icon_pic:e.icon_pic,banner_pic:e.banner_pic}),e.icon_pic&&this.getImageUrl(B.default.system.getPublicPicUrl(e.icon_pic),"icon_pic"),e.banner_pic&&this.getImageUrl(B.default.system.getPublicPicUrl(e.banner_pic),"banner_pic"),this.getIntroducePics(e.introduce_pics)),this.showModal()}},{key:"handleSelect",value:function(e){this.setState({selectedPartTypes:e})}},{key:"handleChange",value:function(e){var t=this;B.default.ajax({url:B.default.warehouse.category.search(e)},function(e){t.setState({partTypes:e.res.list})})}},{key:"addItemLevel",value:function(){var e=this.props.form,t=e.getFieldValue("keys");t=t.concat(this.state.itemLevelIndex),e.setFieldsValue({keys:t}),this.setState({itemLevelIndex:this.state.itemLevelIndex+1})}},{key:"deleteItemLevel",value:function(e){var t=this.props.form,a=t.getFieldValue("keys");a.length>1&&(a.splice(a.indexOf(e),1),t.setFieldsValue({keys:a}),this.setState({itemLevelIndex:this.state.itemLevelIndex-1}))}},{key:"handleSubmit",value:function(){var e=this,a=this.state.item,n=this.props.form.getFieldsValue();if("1"===n.sell_bonus_type&&!n.sell_bonus_group)return v.default.error("请选择销售提成薪资组"),!1;if("1"===n.work_bonus_type&&!n.work_bonus_group)return v.default.error("请选择施工提成薪资组"),!1;if(!n.name)return v.default.error("请填写项目名称"),!1;if(!n.maintain_type)return v.default.error("请填写产值类型"),!1;if(n.quote_type=n.quote_type?"1":"0",n.is_show_on_app=n.is_show_on_app?"1":"0",1===t.Number(this.state.quoteType)){for(var l=[],r=0;r<=this.state.itemLevelIndex;r++){var i="name_"+r,u="price_"+r;if(n[i]){var o={name:n[i],price:n[u]};l.push(o)}delete n[i],delete n[u]}n.levels=t.JSON.stringify(l)}delete n.keys,n.part_types=this.state.selectedPartTypes.join(","),n.introduce_pics=this.assembleIntroducePics(n),B.default.ajax({url:a._id?B.default.maintainItem.edit():B.default.maintainItem.add(),type:"POST",data:n},function(t){a._id?v.default.success("编辑成功！"):v.default.success("添加成功！"),e.props.onSuccess(t.res.item),a._id||e.props.form.resetFields(),e.hideModal()},function(e){a._id,v.default.error(e)})}},{key:"handleQuoteTypeChange",value:function(e){this.setState({quoteType:e?"1":"0"})}},{key:"handleSellChange",value:function(e){var a=t.String(e.target.value);a&&"0"!==a||this.props.form.setFieldsValue({sell_bonus_group:"4"})}},{key:"handleWorkChange",value:function(e){var a=t.String(e.target.value);a&&"0"!==a||this.props.form.setFieldsValue({work_bonus_group:"1"})}},{key:"assembleIntroducePics",value:function(e){for(var t=[],a=e.intro_keys,n=0;n<a.length;n++){var l="introduce_pics_hide_"+n,r="introduce_pics_"+n+"_key";this.state[l]||t.push(this.state[r])}return delete e.intro_keys,t.join(",")}},{key:"getMaintainItemTypes",value:function(){var e=this;B.default.ajax({url:B.default.aftersales.getMaintainItemTypes()},function(t){e.setState({types:t.res.type_list})})}},{key:"getIntroducePics",value:function(e){var t=this,a=[],n={},l=e.split(",");l.length>0&&(X=l.length-1,l.map(function(e,l){a.push(l);var r="introduce_pics_"+l,i="introduce_pics_"+l+"_key",u="introduce_pics_"+l+"_files",o="introduce_pics_"+l+"_progress";n[i]=e,n[u]=[],n[o]={},t.setState(n),e&&t.getImageUrl(B.default.system.getPublicPicUrl(e),r)})),this.setState({intro_keys:a})}},{key:"addIntroducePics",value:function(){var e;X++;var t=this.props.form,a=t.getFieldValue("intro_keys");a=a.concat(X),t.setFieldsValue({intro_keys:a});var n="introduce_pics_"+X+"_key",l="introduce_pics_"+X+"_files",r="introduce_pics_"+X+"_progress";this.setState((e={},_defineProperty(e,n,""),_defineProperty(e,l,[]),_defineProperty(e,r,{}),e))}},{key:"removeIntroducePics",value:function(e){var t="introduce_pics_hide_"+e;this.setState(_defineProperty({},t,!0))}},{key:"hideModal",value:function(){this.setState({visible:!1}),this.props.form.resetFields()}},{key:"render",value:function(){var e=this,a=M.default.selectStyle,n=M.default.formItem_814Half,l=M.default.formItem_814,i=M.default.formItemTwo,o=M.default.formItem12,c=this.props.form,p=c.getFieldDecorator,m=c.getFieldValue,_=this.state,b=_.visible,v=_.item,g=_.intro_keys,k=_.hasPermission,P=this.props,S=P.disabled,O=P.size,T=void 0;try{T=t.JSON.parse(v.levels)}catch(e){T=[]}for(var q=[],j=0;j<T.length;j++)q.push(j);p("keys",{initialValue:q});var V=m("keys"),N=m("keys").map(function(t){return x.default.createElement(d.default,{key:t},x.default.createElement(h.default,{span:8},x.default.createElement(G,I({label:"项目档次"+(t+1)},i),p("name_"+t,{initialValue:t>=T.length?"":T[t].name})(x.default.createElement(y.default,{style:{width:"182px"}})))),x.default.createElement(h.default,{span:9},x.default.createElement(G,I({label:"工时单价"},i),p("price_"+t,{initialValue:t>=T.length?"":T[t].price})(x.default.createElement(y.default,{type:"number",addonAfter:"元",min:0,placeholder:"请输入工时单价",style:{width:"202px"}})))),x.default.createElement(h.default,{span:3,className:"ml-10"},x.default.createElement(f.default,{className:"dynamic-delete-button",type:"delete",disabled:1===V.length,onClick:e.deleteItemLevel.bind(e,t)})))}),L=(0,D.default)({hide:"0"===t.String(this.state.quoteType)}),F=(0,D.default)({hide:!this.state.isAppShow});p("intro_keys",{initialValue:g});var W=m("intro_keys").map(function(t){var a="introduce_pics_hide_"+t;return x.default.createElement(d.default,{className:e.state[a]?"hide":"",key:t},x.default.createElement(h.default,{span:12},x.default.createElement(G,{label:"项目介绍",labelCol:{span:8},wrapperCol:{span:16},help:"尺寸: 1080*1800px"},x.default.createElement(K.default,{prefix:"introduce_pics_"+t,saveKey:e.handleKey.bind(e),source:B.default.system.getPublicPicUploadToken("introduce_pics"),onDrop:e.onDrop.bind(e,"introduce_pics_"+t),onUpload:e.onUpload.bind(e,"introduce_pics_"+t)},e.renderImage("introduce_pics_"+t)))),x.default.createElement(h.default,{span:12},x.default.createElement(G,{labelCol:{span:3},wrapperCol:{span:8},style:{marginLeft:"-150px"}},0===t?x.default.createElement(s.default,{size:"small",type:"primary",icon:"plus",onClick:function(){return e.addIntroducePics(t)}},"添加"):x.default.createElement(s.default,{size:"small",type:"ghost",icon:"minus",onClick:function(){return e.removeIntroducePics(t)}},"删除"))))}),z=x.default.createElement(A,{tab:"基本信息",key:"1"},p("_id",{initialValue:v._id})(x.default.createElement(y.default,{type:"hidden"})),x.default.createElement(d.default,null,x.default.createElement(h.default,{span:16},x.default.createElement(G,I({label:"项目名称"},n),p("name",{initialValue:this.props.inputValue?this.props.inputValue:v.name,rules:U.default.getRuleItemName(),validateTrigger:"onBlur"})(x.default.createElement(y.default,{placeholder:"请输入项目名称",style:{width:"525px"}}))))),x.default.createElement(d.default,null,x.default.createElement(h.default,{span:8},x.default.createElement(G,I({label:"产值类型"},l,{required:!0}),p("maintain_type",{initialValue:v.maintain_type})(x.default.createElement(w.default,I({},a,{placeholder:"请选择产值类型"}),this.state.types.map(function(e){return x.default.createElement(Q,{key:e._id},e.name)}))))),x.default.createElement(h.default,{span:9},x.default.createElement(G,I({label:"顺序"},l,{help:"数值越大越靠前"}),p("order",{initialValue:v.order})(x.default.createElement(y.default,null))))),x.default.createElement("div",{className:k?"":"hide"},x.default.createElement(d.default,null,x.default.createElement(h.default,{span:8},x.default.createElement(G,I({label:"销售提成"},l),p("sell_bonus_amount",{initialValue:v.sell_bonus_amount,onChange:this.handleSellChange})(x.default.createElement(y.default,{addonBefore:"￥",placeholder:"请输入",type:"number"})))),x.default.createElement(h.default,{span:9},x.default.createElement(G,I({label:"提成方式"},l),p("sell_bonus_type",{initialValue:v.sell_bonus_type||"0"})(x.default.createElement(H,null,x.default.createElement(E.default,{value:"0"},"个人提成"),x.default.createElement(E.default,{value:"1"},"薪资组提成"))))),x.default.createElement(h.default,{span:7,className:"1"===this.props.form.getFieldValue("sell_bonus_type")?"":"hide"},x.default.createElement(G,I({label:" "},l),p("sell_bonus_group",{initialValue:v.sell_bonus_group||"4"})(x.default.createElement(w.default,{size:"large",style:{width:"180px",marginLeft:"-110px"},placeholder:"请选择"},x.default.createElement(Q,{value:"0"},"其它组"),x.default.createElement(Q,{value:"1"},"洗车组"),x.default.createElement(Q,{value:"2"},"维修组"),x.default.createElement(Q,{value:"3"},"美容组"),x.default.createElement(Q,{value:"4"},"销售组")))))),x.default.createElement(d.default,null,x.default.createElement(h.default,{span:8},x.default.createElement(G,I({label:"施工提成"},l),p("work_bonus_amount",{initialValue:v.work_bonus_amount,onChange:this.handleWorkChange})(x.default.createElement(y.default,{addonBefore:"￥",placeholder:"请输入",type:"number"})))),x.default.createElement(h.default,{span:9},x.default.createElement(G,I({label:"提成方式"},l),p("work_bonus_type",{initialValue:v.work_bonus_type||"1"})(x.default.createElement(H,null,x.default.createElement(E.default,{value:"0"},"个人提成"),x.default.createElement(E.default,{value:"1"},"薪资组提成"))))),x.default.createElement(h.default,{span:7,className:"1"===this.props.form.getFieldValue("work_bonus_type")?"":"hide"},x.default.createElement(G,I({label:" "},l),p("work_bonus_group",{initialValue:v.work_bonus_group||"1"})(x.default.createElement(w.default,{size:"large",style:{width:"180px",marginLeft:"-110px"},placeholder:"请选择"},x.default.createElement(Q,{value:"0"},"其它组"),x.default.createElement(Q,{value:"1"},"洗车组"),x.default.createElement(Q,{value:"2"},"维修组"),x.default.createElement(Q,{value:"3"},"美容组"),x.default.createElement(Q,{value:"4"},"销售组"))))))),x.default.createElement(d.default,null),x.default.createElement(d.default,null,x.default.createElement(h.default,{span:16},x.default.createElement(G,I({label:"预设报价"},n),p("quote_type",{valuePropName:"checked",initialValue:"1"===v.quote_type||!1,onChange:this.handleQuoteTypeChange})(x.default.createElement(u.default,{checkedChildren:"启用",unCheckedChildren:"停用"}))))),x.default.createElement("div",{className:L},N,x.default.createElement(d.default,null,x.default.createElement(s.default,{type:"dashed",onClick:this.addItemLevel,style:{width:"56.6%",marginLeft:"11%"}},x.default.createElement(f.default,{type:"plus"})," 添加项目档次")))),J=x.default.createElement(A,{tab:"客户端设置",key:"2"},x.default.createElement(G,I({label:"客户端展示"},o),p("is_show_on_app",{valuePropName:"checked",initialValue:"1"===v.is_show_on_app||!1})(x.default.createElement(u.default,{checkedChildren:"是",unCheckedChildren:"否"}))),x.default.createElement("div",{className:F},x.default.createElement(G,I({label:"项目封面"},o,{help:"尺寸: 360*240px"}),p("icon_pic")(x.default.createElement(y.default,{type:"hidden"})),x.default.createElement(K.default,{prefix:"icon_pic",saveKey:this.handleKey.bind(this),source:B.default.system.getPublicPicUploadToken("icon_pic"),onDrop:this.onDrop.bind(this,"icon_pic"),onUpload:this.onUpload.bind(this,"icon_pic")},this.renderImage("icon_pic"))),x.default.createElement(G,I({label:"banner图"},o,{help:"尺寸: 1080*480px"}),p("banner_pic")(x.default.createElement(y.default,{type:"hidden"})),x.default.createElement(K.default,{prefix:"banner_pic",saveKey:this.handleKey.bind(this),source:B.default.system.getPublicPicUploadToken("banner_pic"),onDrop:this.onDrop.bind(this,"banner_pic"),onUpload:this.onUpload.bind(this,"banner_pic")},this.renderImage("banner_pic"))),W));return x.default.createElement("span",null,"small"===O?S?x.default.createElement("span",{className:"text-gray"},"编辑"):x.default.createElement("a",{href:"javascript:;",onClick:this.editItem},"编辑"):x.default.createElement(s.default,{type:"primary",onClick:this.editItem},"创建项目"),x.default.createElement(r.default,{title:x.default.createElement("span",null,x.default.createElement(f.default,{type:"edit"}),"small"===O?"编辑项目":"创建项目"),visible:b,width:960,onOk:this.handleSubmit,onCancel:this.hideModal},x.default.createElement(C.default,null,x.default.createElement(R.default,{defaultActiveKey:"1"},z,B.default.isSuperAdministrator()?J:""))))}}]),Edit}(N.default);Y=C.default.create()(Y),a.default=Y},i=function(e,a,n){function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,a){if(!(e instanceof a))throw new t.TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,a){if(!e)throw new t.ReferenceError("this hasn't been initialised - super() hasn't been called");return!a||"object"!=typeof a&&"function"!=typeof a?e:a}function _inherits(e,a){if("function"!=typeof a&&null!==a)throw new t.TypeError("Super expression must either be null or a function, not "+typeof a);e.prototype=t.Object.create(a&&a.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),a&&(t.Object.setPrototypeOf?t.Object.setPrototypeOf(e,a):e.__proto__=a)}t.Object.defineProperty(a,"__esModule",{value:!0});var l=function(){function defineProperties(e,a){for(var n=0;n<a.length;n++){var l=a[n];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),t.Object.defineProperty(e,l.key,l)}}return function(e,t,a){return t&&defineProperties(e.prototype,t),a&&defineProperties(e,a),e}}(),r=n(0),i=_interopRequireDefault(r),u=n(22),o=_interopRequireDefault(u),s=n(316),c=_interopRequireDefault(s),d=n(1806),p=_interopRequireDefault(d),f=function(e){function Table(){return _classCallCheck(this,Table),_possibleConstructorReturn(this,(Table.__proto__||t.Object.getPrototypeOf(Table)).apply(this,arguments))}return _inherits(Table,e),l(Table,[{key:"render",value:function(){var e=o.default.getLoginUser(),a=this,n=[{title:"排序",dataIndex:"order",key:"order",width:"75px"},{title:"项目名称",dataIndex:"name",key:"name"},{title:"产值类型",dataIndex:"type_name",key:"type_name"},{title:"工时档次",key:"level",render:function(e,a){var n=[];if(a.levels.length>0){t.JSON.parse(a.levels).map(function(e,t){n.push(i.default.createElement("div",{className:"in-table-line",key:a._id+"-"+t},e.name))})}return n}},{title:"工时单价",key:"price",className:"column-money",width:"80px",render:function(e,a){var n=[];if(a.levels.length>0){t.JSON.parse(a.levels).map(function(e,l){n.push(i.default.createElement("div",{className:"in-table-line column-money",key:a._id+"-"+l},t.Number(e.price).toFixed(2)))})}return n}},{title:"操作",key:"option",className:"center",width:"70px",render:function(t,n){return i.default.createElement(p.default,{item:n,disabled:e.companyId!=n.company_id,onSuccess:a.props.onSuccess,size:"small"})}}];return this.renderTable(n)}}]),Table}(c.default);a.default=f},u=e,o=u.webpackJsonp;if(u.webpackJsonp!==o)throw new Error("Prepack model invariant violation: "+u.webpackJsonp);var s=[56],c={1526:a,1615:n,1693:l,1806:r,2174:i};o(s,c)}).call(this);